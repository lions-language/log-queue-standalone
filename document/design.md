## 目标
### 功能
- 向topic中写入数据, 并持久化
- 消费者可以决定从哪里开始消费
    - 从上一次读取到的位置开始消费
    - 从头开始消费
    - 从最新的开始消费
- 多个消费者共同消费同一个 topic

### 集群
- 单节点写入, 如果写入节点崩溃, 将存在一定时间的 不可用


## 实现
### 消息的写入
#### 概述
- 为每一个topic创建一个目录
    - 存储数据
- 在topic的目录中, 将写入topic的数据记录到文件中
- 每个文件中分为多个 slot, 每个槽的大小设置为 页大小, 便于读取的时候可以完全加载到内存页中 (避免跨页访问)
- topic目录中的日志文件使用 的第一条数据的 offset 命名

#### 文件查找
- 对所有的文件建立 索引
- 输入 整体索引, 通过对索引的快速查找(二分查找), 定位到文件名

#### 分了slot之后, 如何查找
- 为每个 数据文件 都建立一个 索引文件, 索引文件中记录 相对偏移 和 文件的实际偏移 之间的映射关系
    - 索引的查找可以使用 二分查找
- 如果查找方知道 即将读取的 相对偏移, 那么就可以通过这个索引表, 找到对应的 文件中的实际偏移; 拿到实际偏移后, 就可以根据 slot的大小计算出slot位置 (实际偏移 / slot大小)
    - 相对偏移 = 整体偏移 - 文件名(第一条消息的偏移)


### 消息的读取

